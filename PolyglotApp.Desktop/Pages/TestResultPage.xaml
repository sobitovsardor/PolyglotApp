<Page x:Class="PolyglotApp.Desktop.Pages.TestResultPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="TestResultPage">

    <Grid Background="White" Margin="20">
        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Width="500">

            <TextBlock Text="Test Results"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="#333"
                       TextAlignment="Center"
                       Margin="0,0,0,20"/>

            <TextBlock Text="{Binding SectionTitle}" FontSize="18" FontWeight="SemiBold" TextAlignment="Center"/>
            <TextBlock Text="{Binding UnitTitle}" FontSize="16" Foreground="#666" TextAlignment="Center" Margin="0,0,0,10"/>

            <TextBlock Text="{Binding Difficulty}" FontSize="16" FontWeight="SemiBold" TextAlignment="Center"/>
            <TextBlock Text="Score:" FontSize="16" FontWeight="SemiBold" Margin="0,10,0,0" TextAlignment="Center"/>
            <TextBlock FontSize="20" FontWeight="Bold" Foreground="#4A90E2" TextAlignment="Center">
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}{0} / {1}">
                        <Binding Path="CorrectAnswers"/>
                        <Binding Path="TotalQuestions"/>
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>

            <TextBlock Text="Time Taken:" FontSize="16" FontWeight="SemiBold" Margin="0,10,0,0" TextAlignment="Center"/>
            <TextBlock Text="{Binding TimeTaken}" FontSize="16" TextAlignment="Center" Foreground="#666"/>

            <TextBlock Text="Mistakes:" FontSize="18" FontWeight="SemiBold" Margin="0,20,0,10" TextAlignment="Center"/>

            <ListBox ItemsSource="{Binding Mistakes}" BorderThickness="0">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="5">
                            <TextBlock Text="{Binding WordText}" FontWeight="SemiBold" Foreground="#E74C3C"/>
                            <TextBlock Text=" → " Margin="5,0"/>
                            <TextBlock Text="{Binding CorrectTranslation}" Foreground="#2ECC71"/>
                            <TextBlock Text=" (You wrote: " Foreground="#666"/>
                            <TextBlock Text="{Binding UserAnswer}" Foreground="#E67E22"/>
                            <TextBlock Text=")" Foreground="#666"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <Button Content="⬅ Back to Units"
                    Width="200"
                    Height="45"
                    FontSize="16"
                    FontWeight="SemiBold"
                    Margin="0,20,0,0"
                    Background="#4A90E2"
                    Foreground="White"
                    BorderThickness="0"
                    Cursor="Hand"
                    Click="BackToUnits_Click"/>
        </StackPanel>
    </Grid>
</Page>
